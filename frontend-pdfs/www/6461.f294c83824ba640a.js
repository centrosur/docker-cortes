"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6461],{6461:(rt,N,m)=>{m.r(N),m.d(N,{BackofficeModule:()=>tt});var I=m(177),C=m(9012),P=m(9417),_=m(467),O=m(154),t=m(4438),R=m(8057),f=m(908),x=m(5035),M=m(1413),T=m(6971),j=m(5360),W=m(369);let k=(()=>{var o;class s{constructor(e,r){this.platform=e,this.storage=r,this.storage.create()}getDoc(e){var r=this;return(0,_.A)(function*(){yield r.platform.ready();const n=yield r.storage.get(e).catch(a=>{console.log("error en LocalStorageService -> getDoc",a)});return null!=n?n:null})()}deleteDoc(e){var r=this;return(0,_.A)(function*(){return r.storage.remove(e)})()}setDoc(e,r){var n=this;return(0,_.A)(function*(){return n.storage.set(e,r)})()}}return(o=s).\u0275fac=function(e){return new(e||o)(t.KVO(x.OD),t.KVO(W.w))},o.\u0275prov=t.jDH({token:o,factory:o.\u0275fac,providedIn:"root"}),s})(),F=(()=>{var o;class s{constructor(e,r,n,a,l){this.webservicesService=e,this.platform=r,this.router=n,this.interaccionService=a,this.localStorageService=l,this.pathLocalCredentials="portalLogin",this.authState$=new M.B,this.loginWS=new T.WS("auth/login","POST"),this.refreshTokenWS=new T.WS("portal/refresh-token","POST"),this.reestablecerPasswordWS=new T.WS("auth/reset-password","POST"),this.desactivarCuentaWS=new T.WS("auth/desactivar-cuenta","POST"),this.solicitarResetPasswordWS=new T.WS("auth/solicitar-reset-password","POST"),this.library=O.c.config.BACKEND.library,this.isLogin="NOT DEFINED",this.platform.ready().then(()=>{this.loadInfoUser()})}getToken(){return this.token?this.token:null}login(e,r){var n=this;return(0,_.A)(function*(){const a=yield n.loginWS.sendRequest({library:n.library,username:e,password:r});return a&&a.ok&&(n.infoUser=a.datos,n.infoUser.token=a.token,n.token=a.token,n.infoUser.expirationToken=new Date,n.isLogin="IS LOGIN",n.webservicesService.token=n.token,n.saveInfoUser(n.infoUser),n.saveCredentialsLocal(e,r)),a})()}reestablecerPassword(e,r,n){var a=this;return(0,_.A)(function*(){const l=yield a.reestablecerPasswordWS.sendRequest({library:a.library,username:e,codigo:n,password:r});return l.ok&&"IS LOGIN"==a.isLogin&&(yield a.saveCredentialsLocal(e,r),a.refreshToken()),l})()}desactivarCuenta(){var e=this;return(0,_.A)(function*(){const r=yield e.desactivarCuentaWS.sendRequest({library:e.library});return r.ok&&e.deleteCredentials(),r})()}logout(){var e=this;return(0,_.A)(function*(){yield e.localStorageService.deleteDoc("InfoUser")})()}getInfoUser(){var e=this;return(0,_.A)(function*(){return void 0===e.infoUser&&(yield e.loadInfoUser()),e.infoUser})()}authState(){return setTimeout(()=>{void 0!==this.infoUser&&this.authState$.next(this.infoUser)},50),this.authState$.asObservable()}getIsLogin(){return new Promise(e=>{if("IS LOGIN"==this.isLogin)return void e(!0);if("NOT LOGIN"==this.isLogin)return void e(!1);const r=this.authState().subscribe(()=>"IS LOGIN"==this.isLogin?(r.unsubscribe(),void e(!0)):"NOT LOGIN"==this.isLogin?(r.unsubscribe(),void e(!1)):void 0)})}refreshToken(){var e=this;return(0,_.A)(function*(){const r=yield e.getCredentialsLocal();if(r){const n=yield e.refreshTokenWS.sendRequest({library:e.library,...r});n&&(n.ok&&(e.infoUser=n.datos,e.infoUser.token=n.token,e.token=n.token,e.infoUser.expirationToken=new Date,e.isLogin="IS LOGIN",e.saveInfoUser(e.infoUser)),!1===n.ok&&isNaN(n.status)&&(console.log("caducoSession"),e.caducoSession()))}else e.caducoSession()})()}saveInfoUser(e){var r=this;return(0,_.A)(function*(){yield r.localStorageService.setDoc("InfoUser",e),r.authState$.next(r.infoUser)})()}loadInfoUser(){var e=this;return(0,_.A)(function*(){const n=yield e.localStorageService.getDoc("InfoUser");return e.infoUser=n||null,null==e.infoUser?(e.isLogin="NOT LOGIN",e.authState$.next(e.infoUser),null):(e.infoUser&&e.infoUser.token&&(e.token=e.infoUser.token,e.webservicesService.token=e.token,e.isLogin="IS LOGIN",e.refreshToken()),e.authState$.next(e.infoUser),e.infoUser)})()}saveCredentialsLocal(e,r){var n=this;return(0,_.A)(function*(){const a={username:e,password:r},l=n.pathLocalCredentials;yield n.localStorageService.setDoc(l,a)})()}getCredentialsLocal(){var e=this;return(0,_.A)(function*(){const r=e.pathLocalCredentials;return yield e.localStorageService.getDoc(r)})()}deleteCredentials(){var e=this;return(0,_.A)(function*(){const r=e.pathLocalCredentials;yield e.localStorageService.deleteDoc(r)})()}caducoSession(){var e=this;return(0,_.A)(function*(){yield e.interaccionService.preguntaAlert("Importante",'\n      <p class="normal">Su sesi\xf3n ha caducado, por favor vuelva a ingresar</p>\n    '),yield e.logout(),e.router.navigate(["/login"]),setTimeout(()=>{window.location.reload()},400)})()}}return(o=s).\u0275fac=function(e){return new(e||o)(t.KVO(j.E),t.KVO(x.OD),t.KVO(C.Ix),t.KVO(R.P),t.KVO(k))},o.\u0275prov=t.jDH({token:o,factory:o.\u0275fac,providedIn:"root"}),s})();var X=m(9631),w=m(6467),K=m(9213);const z=()=>["/admin/home"];function Y(o,s){1&o&&(t.qex(0),t.j41(1,"div",12),t.nrm(2,"ion-spinner"),t.k0s(),t.bVm())}function $(o,s){if(1&o&&t.nrm(0,"ion-img",25),2&o){const i=t.XpG(3);t.Y8G("src",i.user.photoURL)}}function Z(o,s){1&o&&t.nrm(0,"img",26)}function J(o,s){if(1&o){const i=t.RV6();t.qex(0),t.j41(1,"ion-list",13)(2,"ion-list-header")(3,"h3",14),t.EFF(4," Bienvenido "),t.k0s()(),t.j41(5,"ion-item",15)(6,"ion-avatar",16),t.DNE(7,$,1,1,"ion-img",17)(8,Z,1,0,"img",18),t.k0s(),t.j41(9,"ion-label")(10,"h3",19),t.EFF(11),t.k0s(),t.j41(12,"p",20),t.EFF(13),t.k0s()()()(),t.j41(14,"ion-item",21),t.nrm(15,"ion-icon",22),t.j41(16,"ion-label",20),t.EFF(17,"Inicio"),t.k0s()(),t.j41(18,"ion-item",23),t.bIt("click",function(){t.eBV(i);const r=t.XpG(2);return t.Njj(r.logout())}),t.nrm(19,"ion-icon",24),t.j41(20,"ion-label",20),t.EFF(21," Salir "),t.k0s()(),t.bVm()}if(2&o){const i=t.XpG(2);t.R7$(7),t.Y8G("ngIf",i.user.photoURL.length),t.R7$(),t.Y8G("ngIf",!i.user.photoURL.length),t.R7$(3),t.JRh(i.user.displayName),t.R7$(2),t.JRh(i.user.email),t.R7$(),t.Y8G("routerLink",t.lJ4(5,z))}}function Q(o,s){1&o&&t.eu8(0)}function q(o,s){if(1&o&&(t.qex(0),t.DNE(1,Q,1,0,"ng-container",28),t.bVm()),2&o){t.XpG(3);const i=t.sdS(17);t.R7$(),t.Y8G("ngTemplateOutlet",i)}}function ee(o,s){if(1&o&&t.DNE(0,q,2,1,"ng-container",27),2&o){const i=t.XpG(2);t.Y8G("ngIf",i.enableEmailAndPassword)}}function te(o,s){if(1&o&&t.DNE(0,J,22,6,"ng-container",11)(1,ee,1,1,"ng-template",null,2,t.C5r),2&o){const i=t.sdS(2),e=t.XpG();t.Y8G("ngIf",e.login)("ngIfElse",i)}}function ie(o,s){if(1&o){const i=t.RV6();t.j41(0,"h2",29),t.EFF(1," Inicio de sesi\xf3n "),t.k0s(),t.j41(2,"form",30,3),t.bIt("ngSubmit",function(){t.eBV(i);const r=t.XpG();return t.Njj(r.loginWithEmailAndPassword())}),t.j41(4,"ion-item",31)(5,"ion-input",32),t.mxI("ngModelChange",function(r){t.eBV(i);const n=t.XpG();return t.DH7(n.email,r)||(n.email=r),t.Njj(r)}),t.k0s()(),t.j41(6,"mat-form-field",33)(7,"mat-label"),t.EFF(8,"Contrase\xf1a"),t.k0s(),t.j41(9,"input",34),t.mxI("ngModelChange",function(r){t.eBV(i);const n=t.XpG();return t.DH7(n.password,r)||(n.password=r),t.Njj(r)}),t.k0s(),t.j41(10,"mat-icon",35),t.bIt("click",function(){t.eBV(i);const r=t.XpG();return t.Njj(r.hide=!r.hide)}),t.EFF(11),t.k0s()(),t.j41(12,"ion-button",36)(13,"strong",37),t.EFF(14,"Ingresar"),t.k0s()()()}if(2&o){const i=t.sdS(3),e=t.XpG();t.R7$(5),t.R50("ngModel",e.email),t.R7$(4),t.R50("ngModel",e.password),t.Y8G("type",e.hide?"password":"text"),t.R7$(2),t.JRh(e.hide?"visibility_off":"visibility"),t.R7$(),t.Y8G("disabled",i.invalid||e.cargando)}}let re=(()=>{var o;class s{constructor(e,r,n,a,l,d,u,p,h){this.interaccionService=e,this.toastController=r,this.popoverController=n,this.modalController=a,this.menuController=l,this.authenticationService=d,this.router=u,this.localStorageService=p,this.platform=h,this.mensaje="",this.modal=!1,this.loginOnlyProviders=!1,this.enableEmailAndPassword=!0,this.providers={emailAndPassword:!0},this.login=!1,this.user={email:"",photoURL:"",displayName:""},this.avatar="https://ionicframework.com/docs/demos/api/avatar/avatar.svg",this.suscrito=!1,this.year=(new Date).getFullYear(),this.info=null,this.isIOS=!1,this.emailIsNew=!0,this.cargando=!0,this.resetPassword=!1,this.hide=!0,this.rolLoaded=null,this.rol=null,this.variables=O.c.variables,this.suscriberAuth=this.authenticationService.authState().subscribe(g=>{this.login=!1,g&&(this.login=!0,this.user.displayName=g.name,this.user.email=g.email,this.interaccionService.dismissLoading()),this.cargando=!1})}ngOnInit(){this.menuController.enable(!1,"principal")}ngOnDestroy(){this.suscriberInfo&&this.suscriberInfo.unsubscribe(),this.suscriberAuth&&this.suscriberAuth.unsubscribe()}suscribirse(){}logout(){var e=this;return(0,_.A)(function*(){yield e.interaccionService.presentLoading("Cerrando sesi\xf3n..."),e.interaccionService.dismissLoading(),yield e.authenticationService.logout(),e.interaccionService.showToast("Sesi\xf3n cerrada"),window.location.reload()})()}loginWithGoogle(){}loginWithFacebook(){}loginWithApple(){}loginWitCredentials(){this.modal?this.modalController.dismiss(!0):this.popoverController.dismiss(),this.router.navigate(["/ng-login"])}loginWithEmailAndPassword(){var e=this;return(0,_.A)(function*(){yield e.interaccionService.presentLoading("Ingresando...");const r=yield e.authenticationService.login(e.email,e.password);yield e.interaccionService.dismissLoading(),console.log("resLogin -> ",r),r&&(r.token?(e.interaccionService.showToast("Has iniciado sesi\xf3n con exito"),e.router.navigate(["/admin/home"])):e.interaccionService.showToast("Credenciales incorrectas"))})()}goToPerfil(){this.modal&&this.modalController.dismiss(!0),this.router.navigate(["/user/miperfil"])}solicitarResetPassword(){return(0,_.A)(function*(){})()}dismissModal(){this.modalController.dismiss()}getRol(e){this.rolLoaded=e.rol?e.rol:"usuario",this.rol=e.rol?e.rol:"usuario",console.log("getRol Login -> ",this.rol)}}return(o=s).\u0275fac=function(e){return new(e||o)(t.rXU(R.P),t.rXU(f.K_),t.rXU(f.IE),t.rXU(f.W3),t.rXU(f._t),t.rXU(F),t.rXU(C.Ix),t.rXU(k),t.rXU(x.OD))},o.\u0275cmp=t.VBU({type:o,selectors:[["app-pop-login"]],inputs:{mensaje:"mensaje",modal:"modal",loginOnlyProviders:"loginOnlyProviders"},decls:18,vars:3,consts:[["elseCargando",""],["loginWithCredenciales",""],["notLogin",""],["fLogin","ngForm"],[1,"ion-text-center"],["fixed","",1,"mt-5"],[1,"ion-justify-content-center"],["sizeXs","12","sizeMd","6","sizeLg","4",1,"ion-text-center"],[1,"text-center","mb-5"],["width","300",1,"m-auto",2,"background","#33276b",3,"src"],[1,"content-login"],[4,"ngIf","ngIfElse"],[2,"min-height","100px","width","100%","text-align","center","padding","50px"],[1,"none"],[1,"m-0","subtitulo"],["detail","false",1,"none"],["slot","start"],[3,"src",4,"ngIf"],["src","https://ionicframework.com/docs/demos/api/avatar/avatar.svg",4,"ngIf"],[1,"subtitulo","m-0"],[1,"normal"],["lines","none","detail","","button","",1,"none",3,"routerLink"],["color","primary","slot","start","name","home"],["lines","none","detail","","button","",1,"none",3,"click"],["slot","start","color","primary","name","log-out"],[3,"src"],["src","https://ionicframework.com/docs/demos/api/avatar/avatar.svg"],[4,"ngIf"],[4,"ngTemplateOutlet"],[1,"subtitulo","ion-text-center"],[3,"ngSubmit"],["lines","none",1,"item-input"],["name","email","type","email","required","","placeholder","Correo","pattern","^([a-zA-Z0-9_\\-\\.]+)@([a-zA-Z0-9_\\-\\.]+)\\.([a-zA-Z]{2,5})$",1,"ion-text-center","normal",2,"text-align","left",3,"ngModelChange","ngModel"],["appearance","outline",1,"full-width"],["matInput","","name","password",3,"ngModelChange","ngModel","type"],["matSuffix","",3,"click"],["type","submit","color","primary","expand","full",1,"tipoletra","mb-3",3,"disabled"],[1,"white"]],template:function(e,r){if(1&e&&(t.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title",4),t.EFF(3,"Login"),t.k0s()()(),t.j41(4,"ion-content")(5,"ion-grid",5)(6,"ion-row",6)(7,"ion-col",7)(8,"div",8),t.nrm(9,"img",9),t.k0s()()(),t.j41(10,"ion-row",6)(11,"ion-col",7)(12,"div",10),t.DNE(13,Y,3,0,"ng-container",11)(14,te,3,2,"ng-template",null,0,t.C5r)(16,ie,15,5,"ng-template",null,1,t.C5r),t.k0s()()()()()),2&e){const n=t.sdS(15);t.R7$(9),t.Y8G("src",r.variables.logo,t.B4B),t.R7$(4),t.Y8G("ngIf",r.cargando)("ngIfElse",n)}},dependencies:[I.bT,I.T3,C.Wk,f.mC,f.Jm,f.hU,f.W9,f.lO,f.eU,f.iq,f.KW,f.$w,f.uz,f.he,f.nf,f.AF,f.ln,f.w2,f.BC,f.ai,f.Gw,f.N7,P.qT,P.me,P.BC,P.cb,P.YS,P.R_,P.vS,P.cV,X.fg,w.rl,w.nJ,w.yw,K.An],styles:[".item-email[_ngcontent-%COMP%]{border:1px solid #b0bec5;margin:10px;border-radius:10px;background:#97a0a5!important}.item-google[_ngcontent-%COMP%]{border:1px solid #b0bec5;margin:10px;border-radius:10px;background:#f0f8ff!important}.item-apple[_ngcontent-%COMP%]{border:1px solid #dee2e6;margin:10px;border-radius:10px;background:#000!important}.item-facebook[_ngcontent-%COMP%]{border:1px solid #b0bec5;margin:10px;border-radius:10px;background:linear-gradient(90deg,#1196f5,#046de4)!important}.alert-msg[_ngcontent-%COMP%]{--background: #f8d7da;border:1px solid #f3c2c2;border-radius:5px}.icon-alert[_ngcontent-%COMP%]{color:red;background:#f8f9fa;padding:7px;border-radius:100%}.item-input[_ngcontent-%COMP%]{border:solid 1px #dee2e6;border-radius:5px;margin:10px 0;--background: #f8f9fa}.full-width[_ngcontent-%COMP%]{width:100%}.content-login[_ngcontent-%COMP%]{position:absolute;width:100%}"]}),s})();var ne=m(9107),oe=m(7239),se=m(1515),ae=m(1626),le=m(3196),ce=m(9766),c=m(1660),b=m(9969);let A=(()=>{class o{static addClass(i,e){i&&e&&(i.classList?i.classList.add(e):i.className+=" "+e)}static addMultipleClasses(i,e){if(i&&e)if(i.classList){let r=e.trim().split(" ");for(let n=0;n<r.length;n++)i.classList.add(r[n])}else{let r=e.split(" ");for(let n=0;n<r.length;n++)i.className+=" "+r[n]}}static removeClass(i,e){i&&e&&(i.classList?i.classList.remove(e):i.className=i.className.replace(new RegExp("(^|\\b)"+e.split(" ").join("|")+"(\\b|$)","gi")," "))}static removeMultipleClasses(i,e){i&&e&&[e].flat().filter(Boolean).forEach(r=>r.split(" ").forEach(n=>this.removeClass(i,n)))}static hasClass(i,e){return!(!i||!e)&&(i.classList?i.classList.contains(e):new RegExp("(^| )"+e+"( |$)","gi").test(i.className))}static siblings(i){return Array.prototype.filter.call(i.parentNode.children,function(e){return e!==i})}static find(i,e){return Array.from(i.querySelectorAll(e))}static findSingle(i,e){return this.isElement(i)?i.querySelector(e):null}static index(i){let e=i.parentNode.childNodes,r=0;for(var n=0;n<e.length;n++){if(e[n]==i)return r;1==e[n].nodeType&&r++}return-1}static indexWithinGroup(i,e){let r=i.parentNode?i.parentNode.childNodes:[],n=0;for(var a=0;a<r.length;a++){if(r[a]==i)return n;r[a].attributes&&r[a].attributes[e]&&1==r[a].nodeType&&n++}return-1}static appendOverlay(i,e,r="self"){"self"!==r&&i&&e&&this.appendChild(i,e)}static alignOverlay(i,e,r="self",n=!0){i&&e&&(n&&(i.style.minWidth=`${o.getOuterWidth(e)}px`),"self"===r?this.relativePosition(i,e):this.absolutePosition(i,e))}static relativePosition(i,e){const r=L=>{if(L)return"relative"===getComputedStyle(L).getPropertyValue("position")?L:r(L.parentElement)},n=i.offsetParent?{width:i.offsetWidth,height:i.offsetHeight}:this.getHiddenElementDimensions(i),a=e.offsetHeight,l=e.getBoundingClientRect(),d=this.getWindowScrollTop(),u=this.getWindowScrollLeft(),p=this.getViewport(),h=r(i),g=(null==h?void 0:h.getBoundingClientRect())||{top:-1*d,left:-1*u};let v,S;l.top+a+n.height>p.height?(v=l.top-g.top-n.height,i.style.transformOrigin="bottom",l.top+v<0&&(v=-1*l.top)):(v=a+l.top-g.top,i.style.transformOrigin="top");const U=l.left+n.width-p.width;S=n.width>p.width?-1*(l.left-g.left):U>0?l.left-g.left-U:l.left-g.left,i.style.top=v+"px",i.style.left=S+"px"}static absolutePosition(i,e){const r=i.offsetParent?{width:i.offsetWidth,height:i.offsetHeight}:this.getHiddenElementDimensions(i),n=r.height,a=r.width,l=e.offsetHeight,d=e.offsetWidth,u=e.getBoundingClientRect(),p=this.getWindowScrollTop(),h=this.getWindowScrollLeft(),g=this.getViewport();let v,S;u.top+l+n>g.height?(v=u.top+p-n,i.style.transformOrigin="bottom",v<0&&(v=p)):(v=l+u.top+p,i.style.transformOrigin="top"),S=u.left+a>g.width?Math.max(0,u.left+h+d-a):u.left+h,i.style.top=v+"px",i.style.left=S+"px"}static getParents(i,e=[]){return null===i.parentNode?e:this.getParents(i.parentNode,e.concat([i.parentNode]))}static getScrollableParents(i){let e=[];if(i){let r=this.getParents(i);const n=/(auto|scroll)/,a=l=>{let d=window.getComputedStyle(l,null);return n.test(d.getPropertyValue("overflow"))||n.test(d.getPropertyValue("overflowX"))||n.test(d.getPropertyValue("overflowY"))};for(let l of r){let d=1===l.nodeType&&l.dataset.scrollselectors;if(d){let u=d.split(",");for(let p of u){let h=this.findSingle(l,p);h&&a(h)&&e.push(h)}}9!==l.nodeType&&a(l)&&e.push(l)}}return e}static getHiddenElementOuterHeight(i){i.style.visibility="hidden",i.style.display="block";let e=i.offsetHeight;return i.style.display="none",i.style.visibility="visible",e}static getHiddenElementOuterWidth(i){i.style.visibility="hidden",i.style.display="block";let e=i.offsetWidth;return i.style.display="none",i.style.visibility="visible",e}static getHiddenElementDimensions(i){let e={};return i.style.visibility="hidden",i.style.display="block",e.width=i.offsetWidth,e.height=i.offsetHeight,i.style.display="none",i.style.visibility="visible",e}static scrollInView(i,e){let r=getComputedStyle(i).getPropertyValue("borderTopWidth"),n=r?parseFloat(r):0,a=getComputedStyle(i).getPropertyValue("paddingTop"),l=a?parseFloat(a):0,d=i.getBoundingClientRect(),p=e.getBoundingClientRect().top+document.body.scrollTop-(d.top+document.body.scrollTop)-n-l,h=i.scrollTop,g=i.clientHeight,v=this.getOuterHeight(e);p<0?i.scrollTop=h+p:p+v>g&&(i.scrollTop=h+p-g+v)}static fadeIn(i,e){i.style.opacity=0;let r=+new Date,n=0,a=function(){n=+i.style.opacity.replace(",",".")+((new Date).getTime()-r)/e,i.style.opacity=n,r=+new Date,+n<1&&(window.requestAnimationFrame&&requestAnimationFrame(a)||setTimeout(a,16))};a()}static fadeOut(i,e){var r=1,l=50/e;let d=setInterval(()=>{(r-=l)<=0&&(r=0,clearInterval(d)),i.style.opacity=r},50)}static getWindowScrollTop(){let i=document.documentElement;return(window.pageYOffset||i.scrollTop)-(i.clientTop||0)}static getWindowScrollLeft(){let i=document.documentElement;return(window.pageXOffset||i.scrollLeft)-(i.clientLeft||0)}static matches(i,e){var r=Element.prototype;return(r.matches||r.webkitMatchesSelector||r.mozMatchesSelector||r.msMatchesSelector||function(a){return-1!==[].indexOf.call(document.querySelectorAll(a),this)}).call(i,e)}static getOuterWidth(i,e){let r=i.offsetWidth;if(e){let n=getComputedStyle(i);r+=parseFloat(n.marginLeft)+parseFloat(n.marginRight)}return r}static getHorizontalPadding(i){let e=getComputedStyle(i);return parseFloat(e.paddingLeft)+parseFloat(e.paddingRight)}static getHorizontalMargin(i){let e=getComputedStyle(i);return parseFloat(e.marginLeft)+parseFloat(e.marginRight)}static innerWidth(i){let e=i.offsetWidth,r=getComputedStyle(i);return e+=parseFloat(r.paddingLeft)+parseFloat(r.paddingRight),e}static width(i){let e=i.offsetWidth,r=getComputedStyle(i);return e-=parseFloat(r.paddingLeft)+parseFloat(r.paddingRight),e}static getInnerHeight(i){let e=i.offsetHeight,r=getComputedStyle(i);return e+=parseFloat(r.paddingTop)+parseFloat(r.paddingBottom),e}static getOuterHeight(i,e){let r=i.offsetHeight;if(e){let n=getComputedStyle(i);r+=parseFloat(n.marginTop)+parseFloat(n.marginBottom)}return r}static getHeight(i){let e=i.offsetHeight,r=getComputedStyle(i);return e-=parseFloat(r.paddingTop)+parseFloat(r.paddingBottom)+parseFloat(r.borderTopWidth)+parseFloat(r.borderBottomWidth),e}static getWidth(i){let e=i.offsetWidth,r=getComputedStyle(i);return e-=parseFloat(r.paddingLeft)+parseFloat(r.paddingRight)+parseFloat(r.borderLeftWidth)+parseFloat(r.borderRightWidth),e}static getViewport(){let i=window,e=document,r=e.documentElement,n=e.getElementsByTagName("body")[0];return{width:i.innerWidth||r.clientWidth||n.clientWidth,height:i.innerHeight||r.clientHeight||n.clientHeight}}static getOffset(i){var e=i.getBoundingClientRect();return{top:e.top+(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0),left:e.left+(window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0)}}static replaceElementWith(i,e){let r=i.parentNode;if(!r)throw"Can't replace element";return r.replaceChild(e,i)}static getUserAgent(){if(navigator&&this.isClient())return navigator.userAgent}static isIE(){var i=window.navigator.userAgent;return i.indexOf("MSIE ")>0||(i.indexOf("Trident/")>0?(i.indexOf("rv:"),!0):i.indexOf("Edge/")>0)}static isIOS(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}static isAndroid(){return/(android)/i.test(navigator.userAgent)}static isTouchDevice(){return"ontouchstart"in window||navigator.maxTouchPoints>0}static appendChild(i,e){if(this.isElement(e))e.appendChild(i);else{if(!(e&&e.el&&e.el.nativeElement))throw"Cannot append "+e+" to "+i;e.el.nativeElement.appendChild(i)}}static removeChild(i,e){if(this.isElement(e))e.removeChild(i);else{if(!e.el||!e.el.nativeElement)throw"Cannot remove "+i+" from "+e;e.el.nativeElement.removeChild(i)}}static removeElement(i){"remove"in Element.prototype?i.remove():i.parentNode.removeChild(i)}static isElement(i){return"object"==typeof HTMLElement?i instanceof HTMLElement:i&&"object"==typeof i&&null!==i&&1===i.nodeType&&"string"==typeof i.nodeName}static calculateScrollbarWidth(i){if(i){let e=getComputedStyle(i);return i.offsetWidth-i.clientWidth-parseFloat(e.borderLeftWidth)-parseFloat(e.borderRightWidth)}{if(null!==this.calculatedScrollbarWidth)return this.calculatedScrollbarWidth;let e=document.createElement("div");e.className="p-scrollbar-measure",document.body.appendChild(e);let r=e.offsetWidth-e.clientWidth;return document.body.removeChild(e),this.calculatedScrollbarWidth=r,r}}static calculateScrollbarHeight(){if(null!==this.calculatedScrollbarHeight)return this.calculatedScrollbarHeight;let i=document.createElement("div");i.className="p-scrollbar-measure",document.body.appendChild(i);let e=i.offsetHeight-i.clientHeight;return document.body.removeChild(i),this.calculatedScrollbarWidth=e,e}static invokeElementMethod(i,e,r){i[e].apply(i,r)}static clearSelection(){if(window.getSelection)window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().rangeCount>0&&window.getSelection().getRangeAt(0).getClientRects().length>0&&window.getSelection().removeAllRanges();else if(document.selection&&document.selection.empty)try{document.selection.empty()}catch{}}static getBrowser(){if(!this.browser){let i=this.resolveUserAgent();this.browser={},i.browser&&(this.browser[i.browser]=!0,this.browser.version=i.version),this.browser.chrome?this.browser.webkit=!0:this.browser.webkit&&(this.browser.safari=!0)}return this.browser}static resolveUserAgent(){let i=navigator.userAgent.toLowerCase(),e=/(chrome)[ \/]([\w.]+)/.exec(i)||/(webkit)[ \/]([\w.]+)/.exec(i)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(i)||/(msie) ([\w.]+)/.exec(i)||i.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(i)||[];return{browser:e[1]||"",version:e[2]||"0"}}static isInteger(i){return Number.isInteger?Number.isInteger(i):"number"==typeof i&&isFinite(i)&&Math.floor(i)===i}static isHidden(i){return!i||null===i.offsetParent}static isVisible(i){return i&&null!=i.offsetParent}static isExist(i){return null!==i&&typeof i<"u"&&i.nodeName&&i.parentNode}static focus(i,e){i&&document.activeElement!==i&&i.focus(e)}static getFocusableElements(i,e=""){let r=this.find(i,`button:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${e},\n                [href][clientHeight][clientWidth]:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${e},\n                input:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${e},\n                select:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${e},\n                textarea:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${e},\n                [tabIndex]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${e},\n                [contenteditable]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${e}`),n=[];for(let a of r)"none"!=getComputedStyle(a).display&&"hidden"!=getComputedStyle(a).visibility&&n.push(a);return n}static getFirstFocusableElement(i,e){const r=this.getFocusableElements(i,e);return r.length>0?r[0]:null}static getLastFocusableElement(i,e){const r=this.getFocusableElements(i,e);return r.length>0?r[r.length-1]:null}static getNextFocusableElement(i,e=!1){const r=o.getFocusableElements(i);let n=0;if(r&&r.length>0){const a=r.indexOf(r[0].ownerDocument.activeElement);e?n=-1==a||0===a?r.length-1:a-1:-1!=a&&a!==r.length-1&&(n=a+1)}return r[n]}static generateZIndex(){return this.zindex=this.zindex||999,++this.zindex}static getSelection(){return window.getSelection?window.getSelection().toString():document.getSelection?document.getSelection().toString():document.selection?document.selection.createRange().text:null}static getTargetElement(i,e){if(!i)return null;switch(i){case"document":return document;case"window":return window;case"@next":return null==e?void 0:e.nextElementSibling;case"@prev":return null==e?void 0:e.previousElementSibling;case"@parent":return null==e?void 0:e.parentElement;case"@grandparent":return null==e?void 0:e.parentElement.parentElement;default:const r=typeof i;if("string"===r)return document.querySelector(i);if("object"===r&&i.hasOwnProperty("nativeElement"))return this.isExist(i.nativeElement)?i.nativeElement:void 0;const a=(l=i)&&l.constructor&&l.call&&l.apply?i():i;return a&&9===a.nodeType||this.isExist(a)?a:null}var l}static isClient(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}static getAttribute(i,e){if(i){const r=i.getAttribute(e);return isNaN(r)?"true"===r||"false"===r?"true"===r:r:+r}}static calculateBodyScrollbarWidth(){return window.innerWidth-document.documentElement.offsetWidth}static blockBodyScroll(i="p-overflow-hidden"){document.body.style.setProperty("--scrollbar-width",this.calculateBodyScrollbarWidth()+"px"),this.addClass(document.body,i)}static unblockBodyScroll(i="p-overflow-hidden"){document.body.style.removeProperty("--scrollbar-width"),this.removeClass(document.body,i)}}return(0,c.A)(o,"zindex",1e3),(0,c.A)(o,"calculatedScrollbarWidth",null),(0,c.A)(o,"calculatedScrollbarHeight",null),(0,c.A)(o,"browser",void 0),o})();class de{constructor(s,i=(()=>{})){(0,c.A)(this,"element",void 0),(0,c.A)(this,"listener",void 0),(0,c.A)(this,"scrollableParents",void 0),this.element=s,this.listener=i}bindScrollListener(){this.scrollableParents=A.getScrollableParents(this.element);for(let s=0;s<this.scrollableParents.length;s++)this.scrollableParents[s].addEventListener("scroll",this.listener)}unbindScrollListener(){if(this.scrollableParents)for(let s=0;s<this.scrollableParents.length;s++)this.scrollableParents[s].removeEventListener("scroll",this.listener)}destroy(){this.unbindScrollListener(),this.element=null,this.listener=null,this.scrollableParents=null}}var D=function pe(){let o=[];const r=n=>n&&parseInt(n.style.zIndex,10)||0;return{get:r,set:(n,a,l)=>{a&&(a.style.zIndex=String(((n,a)=>{let l=o.length>0?o[o.length-1]:{key:n,value:a},d=l.value+(l.key===n?0:a)+2;return o.push({key:n,value:d}),d})(n,l)))},clear:n=>{n&&((n=>{o=o.filter(a=>a.value!==n)})(r(n)),n.style.zIndex="")},getCurrent:()=>o.length>0?o[o.length-1].value:0}}();let y=(()=>{class o{}return(0,c.A)(o,"STARTS_WITH","startsWith"),(0,c.A)(o,"CONTAINS","contains"),(0,c.A)(o,"NOT_CONTAINS","notContains"),(0,c.A)(o,"ENDS_WITH","endsWith"),(0,c.A)(o,"EQUALS","equals"),(0,c.A)(o,"NOT_EQUALS","notEquals"),(0,c.A)(o,"IN","in"),(0,c.A)(o,"LESS_THAN","lt"),(0,c.A)(o,"LESS_THAN_OR_EQUAL_TO","lte"),(0,c.A)(o,"GREATER_THAN","gt"),(0,c.A)(o,"GREATER_THAN_OR_EQUAL_TO","gte"),(0,c.A)(o,"BETWEEN","between"),(0,c.A)(o,"IS","is"),(0,c.A)(o,"IS_NOT","isNot"),(0,c.A)(o,"BEFORE","before"),(0,c.A)(o,"AFTER","after"),(0,c.A)(o,"DATE_IS","dateIs"),(0,c.A)(o,"DATE_IS_NOT","dateIsNot"),(0,c.A)(o,"DATE_BEFORE","dateBefore"),(0,c.A)(o,"DATE_AFTER","dateAfter"),o})(),fe=(()=>{var o;class s{constructor(){(0,c.A)(this,"clickSource",new M.B),(0,c.A)(this,"clickObservable",this.clickSource.asObservable())}add(e){e&&this.clickSource.next(e)}}return o=s,(0,c.A)(s,"\u0275fac",function(e){return new(e||o)}),(0,c.A)(s,"\u0275prov",t.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})),s})(),he=(()=>{var o;class s{constructor(){(0,c.A)(this,"ripple",!1),(0,c.A)(this,"inputStyle","outlined"),(0,c.A)(this,"overlayOptions",{}),(0,c.A)(this,"filterMatchModeOptions",{text:[y.STARTS_WITH,y.CONTAINS,y.NOT_CONTAINS,y.ENDS_WITH,y.EQUALS,y.NOT_EQUALS],numeric:[y.EQUALS,y.NOT_EQUALS,y.LESS_THAN,y.LESS_THAN_OR_EQUAL_TO,y.GREATER_THAN,y.GREATER_THAN_OR_EQUAL_TO],date:[y.DATE_IS,y.DATE_IS_NOT,y.DATE_BEFORE,y.DATE_AFTER]}),(0,c.A)(this,"translation",{startsWith:"Starts with",contains:"Contains",notContains:"Not contains",endsWith:"Ends with",equals:"Equals",notEquals:"Not equals",noFilter:"No Filter",lt:"Less than",lte:"Less than or equal to",gt:"Greater than",gte:"Greater than or equal to",is:"Is",isNot:"Is not",before:"Before",after:"After",dateIs:"Date is",dateIsNot:"Date is not",dateBefore:"Date is before",dateAfter:"Date is after",clear:"Clear",apply:"Apply",matchAll:"Match All",matchAny:"Match Any",addRule:"Add Rule",removeRule:"Remove Rule",accept:"Yes",reject:"No",choose:"Choose",upload:"Upload",cancel:"Cancel",pending:"Pending",fileSizeTypes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],chooseYear:"Choose Year",chooseMonth:"Choose Month",chooseDate:"Choose Date",prevDecade:"Previous Decade",nextDecade:"Next Decade",prevYear:"Previous Year",nextYear:"Next Year",prevMonth:"Previous Month",nextMonth:"Next Month",prevHour:"Previous Hour",nextHour:"Next Hour",prevMinute:"Previous Minute",nextMinute:"Next Minute",prevSecond:"Previous Second",nextSecond:"Next Second",am:"am",pm:"pm",dateFormat:"mm/dd/yy",firstDayOfWeek:0,today:"Today",weekHeader:"Wk",weak:"Weak",medium:"Medium",strong:"Strong",passwordPrompt:"Enter a password",emptyMessage:"No results found",searchMessage:"{0} results are available",selectionMessage:"{0} items selected",emptySelectionMessage:"No selected item",emptySearchMessage:"No results found",emptyFilterMessage:"No results found",aria:{trueLabel:"True",falseLabel:"False",nullLabel:"Not Selected",star:"1 star",stars:"{star} stars",selectAll:"All items selected",unselectAll:"All items unselected",close:"Close",previous:"Previous",next:"Next",navigation:"Navigation",scrollTop:"Scroll Top",moveTop:"Move Top",moveUp:"Move Up",moveDown:"Move Down",moveBottom:"Move Bottom",moveToTarget:"Move to Target",moveToSource:"Move to Source",moveAllToTarget:"Move All to Target",moveAllToSource:"Move All to Source",pageLabel:"{page}",firstPageLabel:"First Page",lastPageLabel:"Last Page",nextPageLabel:"Next Page",prevPageLabel:"Previous Page",rowsPerPageLabel:"Rows per page",previousPageLabel:"Previous Page",jumpToPageDropdownLabel:"Jump to Page Dropdown",jumpToPageInputLabel:"Jump to Page Input",selectRow:"Row Selected",unselectRow:"Row Unselected",expandRow:"Row Expanded",collapseRow:"Row Collapsed",showFilterMenu:"Show Filter Menu",hideFilterMenu:"Hide Filter Menu",filterOperator:"Filter Operator",filterConstraint:"Filter Constraint",editRow:"Row Edit",saveEdit:"Save Edit",cancelEdit:"Cancel Edit",listView:"List View",gridView:"Grid View",slide:"Slide",slideNumber:"{slideNumber}",zoomImage:"Zoom Image",zoomIn:"Zoom In",zoomOut:"Zoom Out",rotateRight:"Rotate Right",rotateLeft:"Rotate Left"}}),(0,c.A)(this,"zIndex",{modal:1100,overlay:1e3,menu:1e3,tooltip:1100}),(0,c.A)(this,"translationSource",new M.B),(0,c.A)(this,"translationObserver",this.translationSource.asObservable())}getTranslation(e){return this.translation[e]}setTranslation(e){this.translation={...this.translation,...e},this.translationSource.next(this.translation)}}return o=s,(0,c.A)(s,"\u0275fac",function(e){return new(e||o)}),(0,c.A)(s,"\u0275prov",t.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})),s})();const me=["container"],ge=["input"],_e=["colorSelector"],ve=["colorHandle"],ye=["hue"],Pe=["hueHandle"],Ie=(o,s)=>({"p-colorpicker p-component":!0,"p-colorpicker-overlay":o,"p-colorpicker-dragging":s}),Se=o=>({"p-disabled":o}),Ce=(o,s)=>({"p-colorpicker-panel":!0,"p-colorpicker-overlay-panel":o,"p-disabled":s}),be=(o,s)=>({showTransitionParams:o,hideTransitionParams:s}),Te=o=>({value:"visible",params:o});function Ae(o,s){if(1&o){const i=t.RV6();t.j41(0,"input",9,1),t.bIt("click",function(){t.eBV(i);const r=t.XpG();return t.Njj(r.onInputClick())})("keydown",function(r){t.eBV(i);const n=t.XpG();return t.Njj(n.onInputKeydown(r))})("focus",function(){t.eBV(i);const r=t.XpG();return t.Njj(r.onInputFocus())}),t.k0s()}if(2&o){const i=t.XpG();t.xc7("background-color",i.inputBgColor),t.Y8G("ngClass",t.eq3(7,Se,i.disabled))("disabled",i.disabled),t.BMQ("tabindex",i.tabindex)("id",i.inputId)("data-pc-section","input")}}function Ee(o,s){if(1&o){const i=t.RV6();t.j41(0,"div",10),t.bIt("click",function(r){t.eBV(i);const n=t.XpG();return t.Njj(n.onOverlayClick(r))})("@overlayAnimation.start",function(r){t.eBV(i);const n=t.XpG();return t.Njj(n.onOverlayAnimationStart(r))})("@overlayAnimation.done",function(r){t.eBV(i);const n=t.XpG();return t.Njj(n.onOverlayAnimationEnd(r))}),t.j41(1,"div",11)(2,"div",12,2),t.bIt("touchstart",function(r){t.eBV(i);const n=t.XpG();return t.Njj(n.onColorDragStart(r))})("touchmove",function(r){t.eBV(i);const n=t.XpG();return t.Njj(n.onDrag(r))})("touchend",function(){t.eBV(i);const r=t.XpG();return t.Njj(r.onDragEnd())})("mousedown",function(r){t.eBV(i);const n=t.XpG();return t.Njj(n.onColorMousedown(r))}),t.j41(4,"div",13),t.nrm(5,"div",14,3),t.k0s()(),t.j41(7,"div",15,4),t.bIt("mousedown",function(r){t.eBV(i);const n=t.XpG();return t.Njj(n.onHueMousedown(r))})("touchstart",function(r){t.eBV(i);const n=t.XpG();return t.Njj(n.onHueDragStart(r))})("touchmove",function(r){t.eBV(i);const n=t.XpG();return t.Njj(n.onDrag(r))})("touchend",function(){t.eBV(i);const r=t.XpG();return t.Njj(r.onDragEnd())}),t.nrm(9,"div",16,5),t.k0s()()()}if(2&o){const i=t.XpG();t.Y8G("ngClass",t.l_i(10,Ce,!i.inline,i.disabled))("@overlayAnimation",t.eq3(16,Te,t.l_i(13,be,i.showTransitionOptions,i.hideTransitionOptions)))("@.disabled",!0===i.inline),t.BMQ("data-pc-section","panel"),t.R7$(),t.BMQ("data-pc-section","content"),t.R7$(),t.BMQ("data-pc-section","selector"),t.R7$(2),t.BMQ("data-pc-section","color"),t.R7$(),t.BMQ("data-pc-section","colorHandle"),t.R7$(2),t.BMQ("data-pc-section","hue"),t.R7$(2),t.BMQ("data-pc-section","hueHandle")}}const Le={provide:P.kq,useExisting:(0,t.Rfq)(()=>B),multi:!0};let B=(()=>{var o;class s{constructor(e,r,n,a,l,d,u){(0,c.A)(this,"document",void 0),(0,c.A)(this,"platformId",void 0),(0,c.A)(this,"el",void 0),(0,c.A)(this,"renderer",void 0),(0,c.A)(this,"cd",void 0),(0,c.A)(this,"config",void 0),(0,c.A)(this,"overlayService",void 0),(0,c.A)(this,"style",void 0),(0,c.A)(this,"styleClass",void 0),(0,c.A)(this,"inline",void 0),(0,c.A)(this,"format","hex"),(0,c.A)(this,"appendTo",void 0),(0,c.A)(this,"disabled",void 0),(0,c.A)(this,"tabindex",void 0),(0,c.A)(this,"inputId",void 0),(0,c.A)(this,"autoZIndex",!0),(0,c.A)(this,"baseZIndex",0),(0,c.A)(this,"showTransitionOptions",".12s cubic-bezier(0, 0, 0.2, 1)"),(0,c.A)(this,"hideTransitionOptions",".1s linear"),(0,c.A)(this,"onChange",new t.bkB),(0,c.A)(this,"onShow",new t.bkB),(0,c.A)(this,"onHide",new t.bkB),(0,c.A)(this,"containerViewChild",void 0),(0,c.A)(this,"inputViewChild",void 0),(0,c.A)(this,"value",{h:0,s:100,b:100}),(0,c.A)(this,"inputBgColor",void 0),(0,c.A)(this,"shown",void 0),(0,c.A)(this,"overlayVisible",void 0),(0,c.A)(this,"defaultColor","ff0000"),(0,c.A)(this,"onModelChange",()=>{}),(0,c.A)(this,"onModelTouched",()=>{}),(0,c.A)(this,"documentClickListener",void 0),(0,c.A)(this,"documentResizeListener",void 0),(0,c.A)(this,"documentMousemoveListener",void 0),(0,c.A)(this,"documentMouseupListener",void 0),(0,c.A)(this,"documentHueMoveListener",void 0),(0,c.A)(this,"scrollHandler",void 0),(0,c.A)(this,"selfClick",void 0),(0,c.A)(this,"colorDragging",void 0),(0,c.A)(this,"hueDragging",void 0),(0,c.A)(this,"overlay",void 0),(0,c.A)(this,"colorSelectorViewChild",void 0),(0,c.A)(this,"colorHandleViewChild",void 0),(0,c.A)(this,"hueViewChild",void 0),(0,c.A)(this,"hueHandleViewChild",void 0),(0,c.A)(this,"window",void 0),this.document=e,this.platformId=r,this.el=n,this.renderer=a,this.cd=l,this.config=d,this.overlayService=u,this.window=this.document.defaultView}set colorSelector(e){this.colorSelectorViewChild=e}set colorHandle(e){this.colorHandleViewChild=e}set hue(e){this.hueViewChild=e}set hueHandle(e){this.hueHandleViewChild=e}onHueMousedown(e){this.disabled||(this.bindDocumentMousemoveListener(),this.bindDocumentMouseupListener(),this.hueDragging=!0,this.pickHue(e))}onHueDragStart(e){this.disabled||(this.hueDragging=!0,this.pickHue(e,e.changedTouches[0]))}onColorDragStart(e){this.disabled||(this.colorDragging=!0,this.pickColor(e,e.changedTouches[0]))}pickHue(e,r){var n;let a=r?r.pageY:e.pageY,l=(null===(n=this.hueViewChild)||void 0===n?void 0:n.nativeElement.getBoundingClientRect().top)+(this.document.defaultView.pageYOffset||this.document.documentElement.scrollTop||this.document.body.scrollTop||0);this.value=this.validateHSB({h:Math.floor(360*(150-Math.max(0,Math.min(150,a-l)))/150),s:this.value.s,b:this.value.b}),this.updateColorSelector(),this.updateUI(),this.updateModel(),this.onChange.emit({originalEvent:e,value:this.getValueToUpdate()})}onColorMousedown(e){this.disabled||(this.bindDocumentMousemoveListener(),this.bindDocumentMouseupListener(),this.colorDragging=!0,this.pickColor(e))}onDrag(e){this.colorDragging&&(this.pickColor(e,e.changedTouches[0]),e.preventDefault()),this.hueDragging&&(this.pickHue(e,e.changedTouches[0]),e.preventDefault())}onDragEnd(){this.colorDragging=!1,this.hueDragging=!1,this.unbindDocumentMousemoveListener(),this.unbindDocumentMouseupListener()}pickColor(e,r){var n;let a=r?r.pageX:e.pageX,l=r?r.pageY:e.pageY,d=null===(n=this.colorSelectorViewChild)||void 0===n?void 0:n.nativeElement.getBoundingClientRect(),u=d.top+(this.document.defaultView.pageYOffset||this.document.documentElement.scrollTop||this.document.body.scrollTop||0),h=Math.floor(100*Math.max(0,Math.min(150,a-(d.left+this.document.body.scrollLeft)))/150),g=Math.floor(100*(150-Math.max(0,Math.min(150,l-u)))/150);this.value=this.validateHSB({h:this.value.h,s:h,b:g}),this.updateUI(),this.updateModel(),this.onChange.emit({originalEvent:e,value:this.getValueToUpdate()})}getValueToUpdate(){let e;switch(this.format){case"hex":e="#"+this.HSBtoHEX(this.value);break;case"rgb":e=this.HSBtoRGB(this.value);break;case"hsb":e=this.value}return e}updateModel(){this.onModelChange(this.getValueToUpdate())}writeValue(e){if(e)switch(this.format){case"hex":this.value=this.HEXtoHSB(e);break;case"rgb":this.value=this.RGBtoHSB(e);break;case"hsb":this.value=e}else this.value=this.HEXtoHSB(this.defaultColor);this.updateColorSelector(),this.updateUI(),this.cd.markForCheck()}updateColorSelector(){if(this.colorSelectorViewChild){const e={s:100,b:100};e.h=this.value.h,this.colorSelectorViewChild.nativeElement.style.backgroundColor="#"+this.HSBtoHEX(e)}}updateUI(){var e;this.colorHandleViewChild&&null!==(e=this.hueHandleViewChild)&&void 0!==e&&e.nativeElement&&(this.colorHandleViewChild.nativeElement.style.left=Math.floor(150*this.value.s/100)+"px",this.colorHandleViewChild.nativeElement.style.top=Math.floor(150*(100-this.value.b)/100)+"px",this.hueHandleViewChild.nativeElement.style.top=Math.floor(150-150*this.value.h/360)+"px"),this.inputBgColor="#"+this.HSBtoHEX(this.value)}onInputFocus(){this.onModelTouched()}show(){this.overlayVisible=!0,this.cd.markForCheck()}onOverlayAnimationStart(e){switch(e.toState){case"visible":this.inline||(this.overlay=e.element,this.appendOverlay(),this.autoZIndex&&D.set("overlay",this.overlay,this.config.zIndex.overlay),this.alignOverlay(),this.bindDocumentClickListener(),this.bindDocumentResizeListener(),this.bindScrollListener(),this.updateColorSelector(),this.updateUI());break;case"void":this.onOverlayHide()}}onOverlayAnimationEnd(e){switch(e.toState){case"visible":this.inline||this.onShow.emit({});break;case"void":this.autoZIndex&&D.clear(e.element),this.onHide.emit({})}}appendOverlay(){this.appendTo&&("body"===this.appendTo?this.renderer.appendChild(this.document.body,this.overlay):A.appendChild(this.overlay,this.appendTo))}restoreOverlayAppend(){this.overlay&&this.appendTo&&this.renderer.appendChild(this.el.nativeElement,this.overlay)}alignOverlay(){var e,r;this.appendTo?A.absolutePosition(this.overlay,null===(e=this.inputViewChild)||void 0===e?void 0:e.nativeElement):A.relativePosition(this.overlay,null===(r=this.inputViewChild)||void 0===r?void 0:r.nativeElement)}hide(){this.overlayVisible=!1,this.cd.markForCheck()}onInputClick(){this.selfClick=!0,this.togglePanel()}togglePanel(){this.overlayVisible?this.hide():this.show()}onInputKeydown(e){switch(e.code){case"Space":this.togglePanel(),e.preventDefault();break;case"Escape":case"Tab":this.hide()}}onOverlayClick(e){this.overlayService.add({originalEvent:e,target:this.el.nativeElement}),this.selfClick=!0}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}bindDocumentClickListener(){this.documentClickListener||(this.documentClickListener=this.renderer.listen(this.el?this.el.nativeElement.ownerDocument:"document","click",()=>{this.selfClick||(this.overlayVisible=!1,this.unbindDocumentClickListener()),this.selfClick=!1,this.cd.markForCheck()}))}unbindDocumentClickListener(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null)}bindDocumentMousemoveListener(){this.documentMousemoveListener||(this.documentMousemoveListener=this.renderer.listen(this.el?this.el.nativeElement.ownerDocument:"document","mousemove",r=>{this.colorDragging&&this.pickColor(r),this.hueDragging&&this.pickHue(r)}))}unbindDocumentMousemoveListener(){this.documentMousemoveListener&&(this.documentMousemoveListener(),this.documentMousemoveListener=null)}bindDocumentMouseupListener(){this.documentMouseupListener||(this.documentMouseupListener=this.renderer.listen(this.el?this.el.nativeElement.ownerDocument:"document","mouseup",()=>{this.colorDragging=!1,this.hueDragging=!1,this.unbindDocumentMousemoveListener(),this.unbindDocumentMouseupListener()}))}unbindDocumentMouseupListener(){this.documentMouseupListener&&(this.documentMouseupListener(),this.documentMouseupListener=null)}bindDocumentResizeListener(){(0,I.UE)(this.platformId)&&(this.documentResizeListener=this.renderer.listen(this.window,"resize",this.onWindowResize.bind(this)))}unbindDocumentResizeListener(){this.documentResizeListener&&(this.documentResizeListener(),this.documentResizeListener=null)}onWindowResize(){this.overlayVisible&&!A.isTouchDevice()&&this.hide()}bindScrollListener(){var e;this.scrollHandler||(this.scrollHandler=new de(null===(e=this.containerViewChild)||void 0===e?void 0:e.nativeElement,()=>{this.overlayVisible&&this.hide()})),this.scrollHandler.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}validateHSB(e){return{h:Math.min(360,Math.max(0,e.h)),s:Math.min(100,Math.max(0,e.s)),b:Math.min(100,Math.max(0,e.b))}}validateRGB(e){return{r:Math.min(255,Math.max(0,e.r)),g:Math.min(255,Math.max(0,e.g)),b:Math.min(255,Math.max(0,e.b))}}validateHEX(e){var r=6-e.length;if(r>0){for(var n=[],a=0;a<r;a++)n.push("0");n.push(e),e=n.join("")}return e}HEXtoRGB(e){let r=parseInt(e.indexOf("#")>-1?e.substring(1):e,16);return{r:r>>16,g:(65280&r)>>8,b:255&r}}HEXtoHSB(e){return this.RGBtoHSB(this.HEXtoRGB(e))}RGBtoHSB(e){var r={h:0,s:0,b:0},n=Math.min(e.r,e.g,e.b),a=Math.max(e.r,e.g,e.b),l=a-n;return r.b=a,r.s=0!=a?255*l/a:0,r.h=0!=r.s?e.r==a?(e.g-e.b)/l:e.g==a?2+(e.b-e.r)/l:4+(e.r-e.g)/l:-1,r.h*=60,r.h<0&&(r.h+=360),r.s*=100/255,r.b*=100/255,r}HSBtoRGB(e){var r={r:0,g:0,b:0};let n=e.h,a=255*e.s/100,l=255*e.b/100;if(0==a)r={r:l,g:l,b:l};else{let d=l,u=(255-a)*l/255,p=n%60*(d-u)/60;360==n&&(n=0),n<60?(r.r=d,r.b=u,r.g=u+p):n<120?(r.g=d,r.b=u,r.r=d-p):n<180?(r.g=d,r.r=u,r.b=u+p):n<240?(r.b=d,r.r=u,r.g=d-p):n<300?(r.b=d,r.g=u,r.r=u+p):n<360?(r.r=d,r.g=u,r.b=d-p):(r.r=0,r.g=0,r.b=0)}return{r:Math.round(r.r),g:Math.round(r.g),b:Math.round(r.b)}}RGBtoHEX(e){var r=[e.r.toString(16),e.g.toString(16),e.b.toString(16)];for(var n in r)1==r[n].length&&(r[n]="0"+r[n]);return r.join("")}HSBtoHEX(e){return this.RGBtoHEX(this.HSBtoRGB(e))}onOverlayHide(){this.unbindScrollListener(),this.unbindDocumentResizeListener(),this.unbindDocumentClickListener(),this.overlay=null}ngOnDestroy(){this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.overlay&&this.autoZIndex&&D.clear(this.overlay),this.restoreOverlayAppend(),this.onOverlayHide()}}return o=s,(0,c.A)(s,"\u0275fac",function(e){return new(e||o)(t.rXU(I.qQ),t.rXU(t.Agw),t.rXU(t.aKT),t.rXU(t.sFG),t.rXU(t.gRc),t.rXU(he),t.rXU(fe))}),(0,c.A)(s,"\u0275cmp",t.VBU({type:o,selectors:[["p-colorPicker"]],viewQuery:function(e,r){if(1&e&&(t.GBs(me,5),t.GBs(ge,5),t.GBs(_e,5),t.GBs(ve,5),t.GBs(ye,5),t.GBs(Pe,5)),2&e){let n;t.mGM(n=t.lsd())&&(r.containerViewChild=n.first),t.mGM(n=t.lsd())&&(r.inputViewChild=n.first),t.mGM(n=t.lsd())&&(r.colorSelector=n.first),t.mGM(n=t.lsd())&&(r.colorHandle=n.first),t.mGM(n=t.lsd())&&(r.hue=n.first),t.mGM(n=t.lsd())&&(r.hueHandle=n.first)}},hostAttrs:[1,"p-element"],inputs:{style:"style",styleClass:"styleClass",inline:"inline",format:"format",appendTo:"appendTo",disabled:"disabled",tabindex:"tabindex",inputId:"inputId",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions"},outputs:{onChange:"onChange",onShow:"onShow",onHide:"onHide"},features:[t.Jv_([Le])],decls:4,vars:11,consts:[["container",""],["input",""],["colorSelector",""],["colorHandle",""],["hue",""],["hueHandle",""],[3,"ngStyle","ngClass"],["type","text","class","p-colorpicker-preview p-inputtext","readonly","readonly",3,"ngClass","disabled","backgroundColor","click","keydown","focus",4,"ngIf"],[3,"ngClass","click",4,"ngIf"],["type","text","readonly","readonly",1,"p-colorpicker-preview","p-inputtext",3,"click","keydown","focus","ngClass","disabled"],[3,"click","ngClass"],[1,"p-colorpicker-content"],[1,"p-colorpicker-color-selector",3,"touchstart","touchmove","touchend","mousedown"],[1,"p-colorpicker-color"],[1,"p-colorpicker-color-handle"],[1,"p-colorpicker-hue",3,"mousedown","touchstart","touchmove","touchend"],[1,"p-colorpicker-hue-handle"]],template:function(e,r){1&e&&(t.j41(0,"div",6,0),t.DNE(2,Ae,2,9,"input",7)(3,Ee,11,18,"div",8),t.k0s()),2&e&&(t.HbH(r.styleClass),t.Y8G("ngStyle",r.style)("ngClass",t.l_i(8,Ie,!r.inline,r.colorDragging||r.hueDragging)),t.BMQ("data-pc-name","colorpicker")("data-pc-section","root"),t.R7$(2),t.Y8G("ngIf",!r.inline),t.R7$(),t.Y8G("ngIf",r.inline||r.overlayVisible))},dependencies:[I.YU,I.bT,I.B3],styles:["@layer primeng{.p-colorpicker{display:inline-block}.p-colorpicker-dragging{cursor:pointer}.p-colorpicker-overlay{position:relative}.p-colorpicker-panel{position:relative;width:193px;height:166px}.p-colorpicker-overlay-panel{position:absolute;top:0;left:0}.p-colorpicker-preview{cursor:pointer}.p-colorpicker-panel .p-colorpicker-content{position:relative}.p-colorpicker-panel .p-colorpicker-color-selector{width:150px;height:150px;top:8px;left:8px;position:absolute}.p-colorpicker-panel .p-colorpicker-color{width:150px;height:150px}.p-colorpicker-panel .p-colorpicker-color-handle{position:absolute;top:0;left:150px;border-radius:100%;width:10px;height:10px;border-width:1px;border-style:solid;margin:-5px 0 0 -5px;cursor:pointer;opacity:.85}.p-colorpicker-panel .p-colorpicker-hue{width:17px;height:150px;top:8px;left:167px;position:absolute;opacity:.85}.p-colorpicker-panel .p-colorpicker-hue-handle{position:absolute;top:150px;left:0;width:21px;margin-left:-2px;margin-top:-5px;height:10px;border-width:2px;border-style:solid;opacity:.85;cursor:pointer}}\n"],encapsulation:2,data:{animation:[(0,b.hZ)("overlayAnimation",[(0,b.kY)(":enter",[(0,b.iF)({opacity:0,transform:"scaleY(0.8)"}),(0,b.i0)("{{showTransitionParams}}")]),(0,b.kY)(":leave",[(0,b.i0)("{{hideTransitionParams}}",(0,b.iF)({opacity:0}))])])]},changeDetection:0})),s})(),Oe=(()=>{var o;class s{}return o=s,(0,c.A)(s,"\u0275fac",function(e){return new(e||o)}),(0,c.A)(s,"\u0275mod",t.$C({type:o})),(0,c.A)(s,"\u0275inj",t.G2t({imports:[I.MD]})),s})();const Re=()=>["/admin/login"];function xe(o,s){if(1&o){const i=t.RV6();t.j41(0,"ion-button",30),t.bIt("click",function(){t.eBV(i);const r=t.XpG();return t.Njj(r.subirToDb2())}),t.EFF(1," Subir "),t.k0s()}}function Me(o,s){}function we(o,s){if(1&o){const i=t.RV6();t.j41(0,"ion-button",31),t.bIt("click",function(){t.eBV(i);const r=t.XpG();return t.Njj(r.publicar())}),t.nrm(1,"ion-icon",32),t.j41(2,"ion-label",17)(3,"strong"),t.EFF(4,"Publicar"),t.k0s()()()}}function De(o,s){if(1&o&&(t.j41(0,"ion-select-option",40),t.EFF(1),t.k0s()),2&o){const i=s.$implicit;t.Y8G("value",i),t.R7$(),t.JRh(i)}}function Ne(o,s){if(1&o){const i=t.RV6();t.j41(0,"ion-button",44),t.bIt("click",function(){t.eBV(i);const r=t.XpG(2);return t.Njj(r.generarPdfA4())}),t.j41(1,"strong"),t.EFF(2),t.k0s()()}if(2&o){const i=t.XpG(2);t.R7$(2),t.SpI("Descargar PDF ",i.daySelected,"")}}function ke(o,s){if(1&o){const i=t.RV6();t.j41(0,"ion-button",44),t.bIt("click",function(){t.eBV(i);const r=t.XpG(2);return t.Njj(r.generarPdfTotal())}),t.j41(1,"strong"),t.EFF(2,"Descargar PDF (todo)"),t.k0s()()}}function Fe(o,s){if(1&o){const i=t.RV6();t.j41(0,"ion-toolbar",33)(1,"ion-grid",34)(2,"ion-row",35)(3,"ion-col",36)(4,"ion-card",37)(5,"ion-item",38)(6,"ion-label"),t.EFF(7,"Provincia"),t.k0s(),t.j41(8,"ion-select",39),t.mxI("ngModelChange",function(r){t.eBV(i);const n=t.XpG();return t.DH7(n.provinciaSelected,r)||(n.provinciaSelected=r),t.Njj(r)}),t.Z7z(9,De,2,2,"ion-select-option",40,t.Vm6),t.k0s()()()()()()(),t.j41(11,"ion-toolbar",41)(12,"ion-chip",42)(13,"ion-label"),t.EFF(14),t.k0s()(),t.DNE(15,Ne,3,1,"ion-button",43)(16,ke,3,0),t.k0s()}if(2&o){const i=t.XpG();t.R7$(8),t.R50("ngModel",i.provinciaSelected),t.R7$(),t.Dyx(i.provincias),t.R7$(5),t.Lme(" P\xe1ginas generadas pdf ",i.paginas.generadas," de ",i.paginas.total," "),t.R7$(),t.vxM(15,i.daySelected?15:16)}}function He(o,s){if(1&o){const i=t.RV6();t.j41(0,"ion-button",25),t.bIt("click",function(){const r=t.eBV(i).$implicit,n=t.XpG();return t.Njj(n.selectDay(r))}),t.j41(1,"ion-label",17),t.EFF(2),t.k0s()()}if(2&o){const i=s.$implicit,e=t.XpG();t.Y8G("color",i==e.daySelected?"success":"primary"),t.R7$(2),t.JRh(i)}}function Be(o,s){if(1&o&&(t.j41(0,"p",47),t.EFF(1),t.k0s()),2&o){const i=t.XpG(5);t.R7$(),t.SpI(" ",i.footer.texto," ")}}function Ge(o,s){if(1&o&&(t.DNE(0,Be,2,1,"p",47),t.j41(1,"div",46)(2,"div",48),t.nrm(3,"img",49),t.k0s()()),2&o){const i=t.XpG(4);t.vxM(0,null!=i.footer&&i.footer.enable?0:-1)}}function Ve(o,s){if(1&o&&(t.nrm(0,"app-visor",45),t.DNE(1,Ge,4,1,"div",46)),2&o){const i=t.XpG().$implicit,e=t.XpG(2);t.Y8G("corte",i)("borrador",e.enableBorrador)("encabezado",e.encabezado)("footer",e.footer)("semaforo",e.semaforo),t.R7$(),t.vxM(1,e.enableMultipage?1:-1)}}function Ue(o,s){if(1&o&&t.DNE(0,Ve,2,6),2&o){const i=s.$implicit,e=t.XpG().$implicit;t.vxM(0,i.provincia==e?0:-1)}}function je(o,s){if(1&o&&(t.j41(0,"p",47),t.EFF(1),t.k0s()),2&o){const i=t.XpG(4);t.R7$(),t.SpI(" ",i.footer.texto," ")}}function We(o,s){if(1&o&&(t.DNE(0,je,2,1,"p",47),t.j41(1,"div",48),t.nrm(2,"img",50),t.k0s()),2&o){const i=t.XpG(3);t.vxM(0,null!=i.footer&&i.footer.enable?0:-1),t.R7$(2),t.Y8G("src",i.variablesEnv.logoMinisterio,t.B4B)}}function Xe(o,s){if(1&o&&t.DNE(0,We,3,2,"div",48),2&o){const i=t.XpG(2);t.vxM(0,i.enableMultipage?-1:0)}}function Ke(o,s){if(1&o&&(t.j41(0,"div",28),t.Z7z(1,Ue,1,1,null,null,t.Vm6),t.DNE(3,Xe,1,1),t.k0s()),2&o){const i=s.$implicit,e=t.XpG();t.Y8G("id",i),t.R7$(),t.Dyx(e.tablasCortesFilter),t.R7$(2),t.vxM(3,e.isFooterEnable(i)?3:-1)}}function ze(o,s){if(1&o){const i=t.RV6();t.j41(0,"ion-row")(1,"ion-col",59)(2,"ion-textarea",60),t.mxI("ngModelChange",function(r){t.eBV(i);const n=t.XpG(2);return t.DH7(n.encabezado.texto,r)||(n.encabezado.texto=r),t.Njj(r)}),t.k0s()()()}if(2&o){const i=t.XpG(2);t.R7$(2),t.R50("ngModel",i.encabezado.texto)}}function Ye(o,s){if(1&o&&(t.j41(0,"ion-select-option",40),t.EFF(1),t.k0s()),2&o){const i=s.$implicit;t.Y8G("value",i.value),t.R7$(),t.JRh(i.text)}}function $e(o,s){if(1&o){const i=t.RV6();t.j41(0,"ion-header")(1,"ion-toolbar",51)(2,"ion-title"),t.EFF(3,"Ajustes"),t.k0s(),t.j41(4,"ion-buttons",4)(5,"ion-button",19),t.bIt("click",function(){t.eBV(i),t.XpG();const r=t.sdS(45);return t.Njj(r.isOpen=!1)}),t.nrm(6,"ion-icon",52),t.k0s()()()(),t.j41(7,"ion-content",53)(8,"ion-toolbar")(9,"ion-grid",18)(10,"ion-row",35)(11,"ion-col",54)(12,"ion-toggle",55),t.mxI("ngModelChange",function(r){t.eBV(i);const n=t.XpG();return t.DH7(n.enableBorrador,r)||(n.enableBorrador=r),t.Njj(r)}),t.j41(13,"ion-label"),t.EFF(14,"Borrador"),t.k0s()()()()()(),t.j41(15,"ion-grid",18)(16,"ion-row",35)(17,"ion-col",54)(18,"ion-toggle",55),t.mxI("ngModelChange",function(r){t.eBV(i);const n=t.XpG();return t.DH7(n.encabezado.enable,r)||(n.encabezado.enable=r),t.Njj(r)}),t.j41(19,"ion-label"),t.EFF(20,"Encabezado"),t.k0s()()()(),t.DNE(21,ze,3,1,"ion-row"),t.k0s(),t.j41(22,"ion-item",38)(23,"ion-label"),t.EFF(24,"Semaforizaci\xf3n:"),t.k0s()(),t.j41(25,"ion-item",38)(26,"ion-label"),t.EFF(27,"Color"),t.k0s(),t.j41(28,"ion-select",56),t.mxI("ngModelChange",function(r){t.eBV(i);const n=t.XpG();return t.DH7(n.semaforo,r)||(n.semaforo=r),t.Njj(r)}),t.Z7z(29,Ye,2,2,"ion-select-option",40,t.Vm6),t.k0s()(),t.j41(31,"div",57)(32,"p-colorPicker",58),t.mxI("ngModelChange",function(r){t.eBV(i);const n=t.XpG();return t.DH7(n.semaforo,r)||(n.semaforo=r),t.Njj(r)}),t.k0s()()()}if(2&o){const i=t.XpG();t.R7$(12),t.R50("ngModel",i.enableBorrador),t.Y8G("enableOnOffLabels",!0),t.R7$(6),t.R50("ngModel",i.encabezado.enable),t.Y8G("enableOnOffLabels",!0),t.R7$(3),t.vxM(21,i.encabezado.enable?21:-1),t.R7$(7),t.R50("ngModel",i.semaforo),t.R7$(),t.Dyx(i.coloresSemaforo),t.R7$(3),t.R50("ngModel",i.semaforo)}}const Ze=oe;let G=(()=>{var o;class s{constructor(e,r,n,a){this.interaccionService=e,this.backofficeService=r,this.httpClient=n,this.generatorPdfService=a,this.datosCortes=[],this.provincias=[],this.provinciaSelected=[],this.tablasCortes=[],this.scale=1,this.fechaTitulo="",this.parametros=[],this.variables=[],this.enablePublicar=!1,this.dias=[],this.tablasCortesFilter=[],this.enableBorrador=!0,this.enableMultipage=!0,this.paginas={total:0,generadas:0},this.encabezado={enable:!0,texto:"Recuerda que debido a las condiciones hidrol\xf3gicas, los cortes de energ\xeda pueden modificarse dentro del periodo de corte programado"},this.footer={enable:!1,texto:"* IMPORTANTE: Los horarios de la suspensi\xf3n del servicio el\xe9ctrico est\xe1n sujetos a la variabilidad o mejora de la situaci\xf3n en tiempo real, por lo cual el lapso de tiempo de los cortes energ\xe9ticos podr\xeda disminuir."},this.semaforo="#FFFF00",this.coloresSemaforo=[{value:"#FFFF00",text:"Amarillo"},{value:"#FF8000",text:"Naranja"},{value:"#ff0000",text:"Rojo"}],this.variablesEnv=O.c.variables}ngOnInit(){}uploadFile(e){var r=this;return(0,_.A)(function*(){try{if(e.target.files&&e.target.files[0]){yield r.interaccionService.presentLoading();const n=new FileReader;n.onload=a=>{var d=XLSX.read(a.target.result,{type:"binary"});let u=[];d.SheetNames.forEach(p=>{const g=XLSX.utils.sheet_to_json(d.Sheets[p],{raw:!1,cellDates:!0,dateNF:"mm/dd/yyyy"});u.push(...g)});try{r.procesarTxt(u)}catch(p){console.log(p),r.interaccionService.dismissLoading()}},n.onerror=a=>{r.interaccionService.dismissLoading(),r.interaccionService.presentAlert("Error","Intenta subir el archivo nuevamente")},n.readAsBinaryString(e.target.files[0]),r.file=null}}catch{r.interaccionService.dismissLoading(),r.interaccionService.presentAlert("Error","Intenta subir el archivo nuevamente")}})()}procesarTxt(e){console.log("file -> ",e);const r=[];this.organizarPorHoras(e,r),console.log("fileOrganizado -> ",r),this.provincias=[],this.tablasCortes=[],r.forEach(n=>{if(n.HORA_INICIO&&n.PROVINCIA&&n.DIA){let l=n.HORA_INICIO+"-"+n.HORA_FINAL+"-"+n.PROVINCIA+"-"+n.DIA;this.variablesEnv.alimentadoresIndustriales.find(p=>n.PRIMARIOS_A_DESCONECTAR==p)&&(l+="-INDUSTRIAL");const u=this.tablasCortes.find(p=>l==p.id);if(u)u.lugares.push({canton:n.CANTON,zona:n.ZONAS,sectores:n.SECTORES});else{const p={id:l,encabezado:!0,provincia:n.PROVINCIA,dia:this.getDia(n.DIA),mes:this.getMesYear(n.DIA),horas:this.getHoras(n),lugares:[],industrial:"0421/CABECERA"==n.PRIMARIOS_A_DESCONECTAR||"0426/CABECERA"==n.PRIMARIOS_A_DESCONECTAR};this.fechaTitulo||(this.fechaTitulo=p.dia+" "+p.mes);const h={canton:n.CANTON,zona:n.ZONAS,sectores:n.SECTORES},g=this.tablasCortes.find(v=>v.provincia==p.provincia);p.lugares.push(h),p.encabezado=!g,this.tablasCortes.push(p)}}this.provincias.find(l=>l==n.PROVINCIA)||this.provincias.push(n.PROVINCIA)}),console.log("this.tablasCortes -> ",this.tablasCortes),this.interaccionService.dismissLoading(),this.getListDays(),this.getCurrentDay(),this.changeMultipage(),this.provincias.sort(),this.provinciaSelected=this.provincias,this.enablePublicar=!1}organizarPorHoras(e,r){if(e.length){const n=e[0],a=e.filter(p=>p.DIA==n.DIA&&n.PRIMARIOS_A_DESCONECTAR==p.PRIMARIOS_A_DESCONECTAR);let l="";a.forEach((p,h)=>{l=`${l}${p.HORA_INICIO} a ${p.HORA_FINAL}`,h<a.length-1&&(l+="<br>")});const d={HORA_INICIO:l,HORA_FINAL:"",DIA:a[0].DIA,CANTON:a[0].CANTON,PROVINCIA:a[0].PROVINCIA,SECTORES:a[0].SECTORES.replace(/\\n/g,"\n"),ZONAS:a[0].ZONAS?a[0].ZONAS:a[0].ZONA,PRIMARIOS_A_DESCONECTAR:a[0].PRIMARIOS_A_DESCONECTAR};r.push(d);const u=e.filter(p=>!(p.DIA==n.DIA&&n.PRIMARIOS_A_DESCONECTAR==p.PRIMARIOS_A_DESCONECTAR));this.organizarPorHoras(u,r)}}subirToDb2(){var e=this;return(0,_.A)(function*(){if(yield e.interaccionService.preguntaAlert("Importante","\xbfSeguro que desea guardar, para luego ser publicado?","No")){yield e.interaccionService.presentLoading("Guardando...");const a=JSON.stringify({desconexiones:e.tablasCortes,encabezado:e.encabezado,footer:e.footer,enableMultipage:e.enableMultipage,semaforo:e.semaforo});yield e.backofficeService.save("desconexiones-temporal","desconexiones por estiaje",a,!1,0),e.interaccionService.dismissLoading()}})()}cargarTemporal(){var e=this;return(0,_.A)(function*(){yield e.interaccionService.presentLoading("Cargando...");const r=yield e.backofficeService.getParametro("desconexiones-temporal");e.interaccionService.dismissLoading(),null!=r&&r.desconexiones&&(e.tablasCortes=null==r?void 0:r.desconexiones,console.log(" this.tablasCortes -> ",e.tablasCortes),e.encabezado=r.encabezado,e.semaforo=r.semaforo?r.semaforo:"#ffffff",e.provincias=[],e.tablasCortes.forEach(n=>{e.provincias.find(l=>l==n.provincia)||e.provincias.push(n.provincia)}),console.log("provincias -> ",e.provincias),e.provincias.sort(),e.provinciaSelected=e.provincias,e.enableMultipage=r.enableMultipage,e.getListDays(),e.getCurrentDay(),e.changeMultipage(),e.enablePublicar=!0)})()}publicar(){var e=this;return(0,_.A)(function*(){if(e.enablePublicar){if(yield e.interaccionService.preguntaAlert("Importante","\xbfSeguro que desea publicar este archivo?","No")){yield e.interaccionService.presentLoading("Guardando...");const a=JSON.stringify({desconexiones:e.tablasCortes,encabezado:e.encabezado,semaforo:e.semaforo});yield e.backofficeService.save("desconexiones","desconexiones por estiaje",a,!1,0),e.interaccionService.dismissLoading(),e.interaccionService.showToast("Guardado con \xe9xito")}}else e.interaccionService.preguntaAlert("Error","Debe cargar el archivo temporal antes de publicar")})()}generarPdf(e=null,r=!0,n=this.daySelected){var a=this;return(0,_.A)(function*(){yield a.interaccionService.presentLoading("Descargando.. "+a.daySelected);try{let l=[];Array.isArray(a.provinciaSelected)?l=a.provinciaSelected:l.push(a.provinciaSelected),console.log("provincias -> ",l);let d=a.enableMultipage?a.tablasCortesFilter:l;console.log("arrayIds -> ",d);for(let u=0;u<d.length;u++){const p=a.enableMultipage?d[u].id:d[u],h=yield a.captureDom(p);if(null!=h&&h.height){const g=h.toDataURL("image/png",1),v={height:h.height,width:h.width};v.width>v.height&&(v.height=v.width+200),console.log("pageSize ->  ",v),a.paginas.generadas++,e?(e.addPage([v.width,v.height]),e.addImage(g,"JPEG",0,0,h.width,h.height,"","FAST")):(e=new ne.jsPDF({orientation:"portrait",unit:"pt",format:[v.width,v.height],precision:16,userUnit:1})).addImage(g,"JPEG",0,0,h.width,h.height,"","FAST")}}return r&&e.save(a.getNombrePdf(l)+n),yield a.interaccionService.dismissLoading(),e}catch{a.interaccionService.presentAlert("Error","Ocurri\xf3 un problema, intenta nuevamente por favor")}})()}generarPdfA4(e=null,r=!0,n=this.daySelected){var a=this;return(0,_.A)(function*(){a.generatorPdfService.enableBorrador=a.enableBorrador,a.generatorPdfService.generarPdfA4(a.provinciaSelected,a.tablasCortesFilter,a.daySelected,e,r,n)})()}generarPdfTotal(){var e=this;return(0,_.A)(function*(){e.generatorPdfService.enableBorrador=e.enableBorrador,e.generatorPdfService.generarPdfTotal(e.provinciaSelected,e.tablasCortes,e.dias)})()}captureDom(e){var r=this;return(0,_.A)(function*(){let n=document.getElementById(e);return yield Ze(n,{scale:r.scale})})()}getDia(e){const[r,n,a]=e.split("/").map(Number),l=new Date(a,n-1,r);console.log("getDia value -> ",e),console.log("dia -> ",l);const u=["Domingo","Lunes","Martes","Mi\xe9rcoles","Jueves","Viernes","S\xe1bado"][l.getDay()]+" "+l.getDate();return console.log("dia -> ",u),u}getMesYear(e){const[r,n,a]=e.split("/").map(Number),l=new Date(a,n-1,r);return"de "+["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"][l.getMonth()]+" de "+l.getFullYear()}getHoras(e){let r=e.HORA_INICIO+" "+e.HORA_FINAL;return r=r.replace("\r\n","<br>"),r=r.replace("&#xA;","<br>"),r}getNombrePdf(e){let r=(this.enableBorrador?"BORRADOR - ":"")+"Cortes ";return e.forEach((n,a)=>{r=a==e.length-1?r+n+" - ":r+n+"-"}),r}verPublicado(){var e;window,e=window.location.href.search(`${window.location.host}/cortes`)>0?"/cortes":"/",window.open(e,"_blank")}isFooterEnable(e){return this.tablasCortes.find(n=>n.provincia==e)}getListDays(){const e=[];this.tablasCortes.forEach(r=>{e.find(a=>a==r.dia)||e.push(r.dia)}),console.log("getListDays -> ",e),this.dias=e}selectDay(e){var r;this.tablasCortesFilter=this.tablasCortes.filter(n=>n.dia==e),console.log("selectDay -> ",this.tablasCortesFilter),null!==(r=this.tablasCortesFilter)&&void 0!==r&&r.length?(this.provincias.forEach(n=>{this.tablasCortesFilter.every(a=>a.provincia!=n||(a.encabezado=!0,!1))}),this.daySelected=e):(this.daySelected=this.tablasCortes[0].dia,this.selectDay(this.daySelected)),this.changeMultipage()}getCurrentDay(){const e=new Date;e.setDate(e.getDate());const n=["Domingo","Lunes","Martes","Mi\xe9rcoles","Jueves","Viernes","S\xe1bado"][e.getDay()]+" "+e.getDate();console.log("getCurrentDay -> ",n),this.selectDay(n)}all(){this.daySelected=null,this.tablasCortesFilter=this.tablasCortes,this.changeMultipage()}changeMultipage(){let e=[];Array.isArray(this.provinciaSelected)?e=this.provinciaSelected:e.push(this.provinciaSelected),console.log("provincias -> ",e),this.paginas.total=this.enableMultipage?this.tablasCortesFilter.length:e.length,this.paginas.generadas=0}setProvincias(e){this.provincias=[],e.forEach(r=>{this.provincias.find(a=>a==r.PROVINCIA)||this.provincias.push(r.PROVINCIA)}),this.provinciaSelected=this.provincias}dividirTextoEnLineas(e,r=75){const n=e.split(" ");let a="";const l=[];return n.forEach(d=>{(a+d).length>r?(l.push(a.trim()),a=d+" "):a+=d+" "}),a.trim()&&l.push(a.trim()),l.join("\n")}}return(o=s).\u0275fac=function(e){return new(e||o)(t.rXU(R.P),t.rXU(se.x),t.rXU(ae.Qq),t.rXU(le.h))},o.\u0275cmp=t.VBU({type:o,selectors:[["app-home"]],decls:47,vars:10,consts:[["modalAjustes",""],[3,"translucent"],["color","medium"],[1,"ion-text-center"],["slot","end"],["color","dark","fill","solid",3,"routerLink"],["color","ligth",2,"text-align","end"],["shape","round","color","light"],["for","file-upload",1,"normal","input-file"],["name","document","color","primary",2,"font-size","20px"],["id","file-upload","type","file","accept",".xls, .xlsx",2,"display","none",3,"ngModelChange","change","ngModel"],["shape","round","color","warning",2,"margin-right","10px"],["shape","round","color","light",2,"margin-right","10px",3,"click"],["slot","end","name","cloud-download","color","success"],["shape","round","color","success",2,"margin-right","10px"],["shape","round","color","tertiary",2,"margin-right","10px",3,"click"],["slot","end","name","eye"],[1,"white"],[1,"none"],[3,"click"],["slot","icon-only","name","cog"],[3,"fullscreen"],["collapse","condense"],["size","large"],["slot","fixed",1,"ion-margin"],["shape","round",3,"click","color"],["shape","round",3,"color"],[2,"margin","80px"],[1,"pdf",3,"id"],["trigger","open-modal","initialBreakpoint","0.75",3,"willDismiss"],["shape","round","color","warning",2,"margin-right","10px",3,"click"],["shape","round","color","success",2,"margin-right","10px",3,"click"],["slot","end","name","cloud-upload","color","light"],["color","ligth"],[1,"ion-no-padding"],[1,"ion-justify-content-end"],["sizeXs","12","sizeMd","8","sizeLg","6",1,"ion-no-padding"],["mode","ios",2,"margin","0px 10px"],["lines","none"],["multiple","true","placeholder","Selecciona las provincias",3,"ngModelChange","ngModel"],[3,"value"],[1,"none",2,"text-align","end"],["color","primary","mode","ios"],["color","danger","shape","round",2,"margin-right","10px"],["color","danger","shape","round",2,"margin-right","10px",3,"click"],[3,"corte","borrador","encabezado","footer","semaforo"],["id","footer"],[2,"font-size","17px","margin-left","30px","margin-right","30px","; font-weight","bold","font-style","italic"],[2,"text-align","end"],["src","assets/imagenes/logo-ministerio.png","alt","",1,"logo-ministerio"],["alt","",1,"logo-ministerio",3,"src"],["color","primary"],["slot","icon-only","name","close"],[1,"ion-padding"],["size","auto"],[3,"ngModelChange","ngModel","enableOnOffLabels"],["placeholder","Selecciona un color",3,"ngModelChange","ngModel"],[1,"ion-text-start","ms-5","mt-2"],[3,"ngModelChange","ngModel"],["size","12"],["label","Texto del encabezado","autoGrow","","labelPlacement","floating","fill","outline","placeholder","Ingresa el texto",3,"ngModelChange","ngModel"]],template:function(e,r){if(1&e){const n=t.RV6();t.j41(0,"ion-header",1)(1,"ion-toolbar",2)(2,"ion-title",3),t.EFF(3," Generador de PDFs de desconexiones "),t.k0s(),t.j41(4,"ion-buttons",4)(5,"ion-button",5),t.EFF(6," salir "),t.k0s()()(),t.j41(7,"ion-toolbar",6)(8,"ion-button",7)(9,"label",8),t.EFF(10," Cargar archivo "),t.k0s(),t.nrm(11,"ion-icon",9),t.j41(12,"input",10),t.mxI("ngModelChange",function(l){return t.eBV(n),t.DH7(r.file,l)||(r.file=l),t.Njj(l)}),t.bIt("change",function(l){return t.eBV(n),t.Njj(r.uploadFile(l))}),t.k0s()(),t.DNE(13,xe,2,0,"ion-button",11),t.j41(14,"ion-button",12),t.bIt("click",function(){return t.eBV(n),t.Njj(r.cargarTemporal())}),t.nrm(15,"ion-icon",13),t.j41(16,"ion-label"),t.EFF(17,"Cargar temporal"),t.k0s()(),t.DNE(18,Me,0,0)(19,we,5,0,"ion-button",14),t.j41(20,"ion-button",15),t.bIt("click",function(){return t.eBV(n),t.Njj(r.verPublicado())}),t.nrm(21,"ion-icon",16),t.j41(22,"ion-label"),t.EFF(23,"Ver publicado"),t.k0s(),t.nrm(24,"span",17),t.k0s()(),t.j41(25,"ion-toolbar",18)(26,"ion-buttons",4)(27,"ion-button",19),t.bIt("click",function(){t.eBV(n);const l=t.sdS(45);return t.Njj(l.isOpen=!0)}),t.nrm(28,"ion-icon",20),t.k0s()()(),t.DNE(29,Fe,17,4),t.k0s(),t.j41(30,"ion-content",21)(31,"ion-header",22)(32,"ion-toolbar")(33,"ion-title",23),t.EFF(34,"Generador de PDFs de desconexiones"),t.k0s()()(),t.j41(35,"div",24)(36,"ion-button",25),t.bIt("click",function(){return t.eBV(n),t.Njj(r.all())}),t.j41(37,"ion-label",17),t.EFF(38,"Todo"),t.k0s()(),t.Z7z(39,He,3,2,"ion-button",26,t.Vm6),t.k0s(),t.nrm(41,"div",27),t.Z7z(42,Ke,4,2,"div",28,t.Vm6),t.j41(44,"ion-modal",29,0),t.bIt("willDismiss",function(){t.eBV(n);const l=t.sdS(45);return t.Njj(l.isOpen=!1)}),t.DNE(46,$e,33,7,"ng-template"),t.k0s()()}2&e&&(t.Y8G("translucent",!0),t.R7$(5),t.Y8G("routerLink",t.lJ4(9,Re)),t.R7$(7),t.R50("ngModel",r.file),t.R7$(),t.vxM(13,r.tablasCortes.length?13:-1),t.R7$(5),t.vxM(18,r.tablasCortes.length?18:-1),t.R7$(),t.vxM(19,r.enablePublicar?19:-1),t.R7$(10),t.vxM(29,r.tablasCortes.length?29:-1),t.R7$(),t.Y8G("fullscreen",!0),t.R7$(6),t.Y8G("color",r.daySelected?"primary":"success"),t.R7$(3),t.Dyx(r.dias),t.R7$(3),t.Dyx(r.provinciaSelected))},dependencies:[C.Wk,f.Jm,f.QW,f.b_,f.ZB,f.hU,f.W9,f.lO,f.eU,f.iq,f.uz,f.he,f.ln,f.Nm,f.Ip,f.nc,f.BC,f.BY,f.ai,f.Sb,f.hB,f.Je,f.Gw,f.N7,P.me,P.BC,P.vS,ce.T,B]}),s})();function V(o){return function(){var s=(0,_.A)(function*(i,e){const r=(0,t.WQX)(F);let n=!1;if(console.log("roles admit -> ",o),yield r.getIsLogin()){const l=yield r.getInfoUser();console.log("rol user  -> ",l.rol),o.every(d=>d==l.rol&&(n=!0,!0))}return n});return function(i,e){return s.apply(this,arguments)}}()}const Je=[{path:"home",component:G,canActivate:[V(["admin"])]},{path:"login",component:re},{path:"**",component:G,canActivate:[V(["admin"])]}];let Qe=(()=>{var o;class s{}return(o=s).\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.$C({type:o}),o.\u0275inj=t.G2t({imports:[C.iI.forChild(Je),C.iI]}),s})();var qe=m(2170),et=m(7023);let tt=(()=>{var o;class s{}return(o=s).\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.$C({type:o}),o.\u0275inj=t.G2t({imports:[I.MD,Qe,I.MD,f.bv,C.iI,P.YN,P.X1,I.MD,P.X1,qe.v,et.HomePageModule,Oe]}),s})()}}]);